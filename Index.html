تطبيق تسجيل نقاط اللاعبين مع سجل النقاط

سأقوم بتعديل التطبيق ليظهر في كل بطاقة لاعب سجل النقاط التي تمت إضافتها أو طرحها.

```html
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تطبيق تسجيل نقاط اللاعبين</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 20px;
            margin-top: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #6a11cb;
        }
        
        h1 {
            color: #2575fc;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .description {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }
        
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .player-card {
            background: linear-gradient(to bottom, #f5f7fa, #e4e8f0);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            max-height: 500px;
            overflow: hidden;
        }
        
        .player-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }
        
        .player-card.winner {
            border: 3px solid #4CAF50;
            background: linear-gradient(to bottom, #f1f8e9, #dcedc8);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }
        
        .player-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .score-display {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2575fc;
            margin: 10px 0;
            text-align: center;
        }
        
        .score-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
            width: 100%;
        }
        
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .add-btn {
            background-color: #4CAF50;
            color: white;
        }
        
        .add-btn:hover {
            background-color: #45a049;
            transform: scale(1.1);
        }
        
        .subtract-btn {
            background-color: #f44336;
            color: white;
        }
        
        .subtract-btn:hover {
            background-color: #d32f2f;
            transform: scale(1.1);
        }
        
        .value-control {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 10px 0;
            width: 100%;
        }
        
        .value-control label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .value-input {
            width: 80px;
            padding: 8px;
            border: 2px solid #2575fc;
            border-radius: 8px;
            text-align: center;
            font-size: 1rem;
        }
        
        .score-history {
            width: 100%;
            margin-top: 15px;
            border-top: 1px solid #ddd;
            padding-top: 15px;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .score-history h4 {
            text-align: center;
            margin-bottom: 10px;
            color: #666;
            font-size: 0.9rem;
        }
        
        .history-list {
            list-style: none;
            padding: 0;
        }
        
        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 10px;
            margin-bottom: 5px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .history-add {
            color: #4CAF50;
        }
        
        .history-subtract {
            color: #f44336;
        }
        
        .history-time {
            font-size: 0.8rem;
            color: #888;
        }
        
        .actions {
            display: flex;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .action-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-width: 160px;
        }
        
        .add-row {
            background-color: #6a11cb;
            color: white;
        }
        
        .add-row:hover {
            background-color: #580fb8;
            transform: translateY(-3px);
        }
        
        .calculate {
            background-color: #ff9800;
            color: white;
        }
        
        .calculate:hover {
            background-color: #e68900;
            transform: translateY(-3px);
        }
        
        .clear-all {
            background-color: #f44336;
            color: white;
        }
        
        .clear-all:hover {
            background-color: #d32f2f;
            transform: translateY(-3px);
        }
        
        .results {
            margin-top: 30px;
            padding: 20px;
            background-color: #e8f4fc;
            border-radius: 10px;
            display: none;
        }
        
        .results h2 {
            color: #2575fc;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .winner {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4CAF50;
            text-align: center;
            margin-top: 10px;
            padding: 10px;
            background-color: #f1f8e9;
            border-radius: 8px;
        }
        
        .instructions {
            background-color: #fff8e1;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border-right: 5px solid #ffc107;
        }
        
        .instructions h3 {
            color: #ff9800;
            margin-bottom: 10px;
        }
        
        .instructions ul {
            padding-right: 20px;
            color: #666;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        .winner-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background-color: #4CAF50;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .empty-history {
            text-align: center;
            color: #999;
            font-style: italic;
            padding: 10px;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .players-grid {
                grid-template-columns: 1fr;
            }
            
            .action-btn {
                min-width: 140px;
                padding: 10px 20px;
            }
            
            .player-card {
                max-height: none;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>تطبيق تسجيل نقاط اللاعبين</h1>
        <p class="description">سجل نقاط اللاعبين مع عرض التاريخ الكامل للتغييرات</p>
    </header>
    
    <div class="container">
        <div id="players-container" class="players-grid">
            <!-- Players will be added here dynamically -->
        </div>
        
        <div class="actions">
            <button class="action-btn add-row" onclick="addPlayer()">
                <i class="fas fa-plus"></i> إضافة لاعب
            </button>
            <button class="action-btn calculate" onclick="calculateResults()">
                <i class="fas fa-calculator"></i> حساب النتائج
            </button>
            <button class="action-btn clear-all" onclick="clearAll()">
                <i class="fas fa-trash"></i> مسح الكل
            </button>
        </div>
        
        <div id="results" class="results">
            <h2>النتائج</h2>
            <div id="results-content"></div>
            <div id="winner" class="winner"></div>
        </div>
        
        <div class="instructions">
            <h3>كيفية الاستخدام:</h3>
            <ul>
                <li>أدخل القيمة المراد إضافتها أو طرحها في حقل "القيمة" لكل لاعب</li>
                <li>انقر على زر (+) لإضافة القيمة للاعب</li>
                <li>انقر على زر (-) لطرح القيمة من اللاعب</li>
                <li>سيظهر سجل التغييرات في قسم "سجل النقاط" أسفل كل بطاقة</li>
                <li>انقر على "إضافة لاعب" لإضافة لاعب جديد</li>
                <li>انقر على "حساب النتائج" لرؤية الترتيب والفائز</li>
                <li>انقر على "مسح الكل" لإعادة تعيين جميع النقاط والسجلات</li>
            </ul>
        </div>
    </div>

    <script>
        // Initialize players
        let players = [
            { name: "اللاعب 1", score: 0, value: 1, history: [] },
            { name: "اللاعب 2", score: 0, value: 1, history: [] },
            { name: "اللاعب 3", score: 0, value: 1, history: [] }
        ];
        
        // Get the value for a specific player
        function getValue(index) {
            const valueInput = document.getElementById(`value-${index}`);
            let value = parseInt(valueInput.value);
            
            if (isNaN(value) || value < 1) {
                value = 1;
                valueInput.value = 1;
            }
            
            players[index].value = value;
            return value;
        }
        
        // Update value for a player
        function updateValue(index) {
            const valueInput = document.getElementById(`value-${index}`);
            let value = parseInt(valueInput.value);
            
            if (isNaN(value) || value < 1) {
                value = 1;
                valueInput.value = 1;
            }
            
            players[index].value = value;
        }
        
        // Format time for history
        function formatTime() {
            const now = new Date();
            return `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
        }
        
        // Render players function
        function renderPlayers() {
            const container = document.getElementById('players-container');
            container.innerHTML = '';
            
            players.forEach((player, index) => {
                const playerCard = document.createElement('div');
                playerCard.className = 'player-card';
                playerCard.innerHTML = `
                    <div class="player-name">${player.name}</div>
                    <div class="score-display" id="score-${index}">${player.score}</div>
                    <div class="value-control">
                        <label for="value-${index}">القيمة:</label>
                        <input type="number" id="value-${index}" class="value-input" value="${player.value}" min="1" onchange="updateValue(${index})">
                    </div>
                    <div class="score-controls">
                        <button class="subtract-btn" onclick="updateScore(${index}, -getValue(${index}))">-</button>
                        <button class="add-btn" onclick="updateScore(${index}, getValue(${index}))">+</button>
                    </div>
                    <div class="score-history">
                        <h4>سجل النقاط</h4>
                        ${player.history.length > 0 ? `
                            <ul class="history-list">
                                ${player.history.map(item => `
                                    <li class="history-item ${item.type === 'add' ? 'history-add' : 'history-subtract'}">
                                        <span>${item.type === 'add' ? '+' : '-'}${item.value}</span>
                                        <span class="history-time">${item.time}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        ` : '<div class="empty-history">لا توجد عمليات سابقة</div>'}
                    </div>
                `;
                container.appendChild(playerCard);
            });
        }
        
        // Update score function
        function updateScore(index, value) {
            players[index].score += value;
            // Ensure score doesn't go below zero
            if (players[index].score < 0) players[index].score = 0;
            
            // Add to history
            const absValue = Math.abs(value);
            players[index].history.unshift({
                type: value > 0 ? 'add' : 'subtract',
                value: absValue,
                time: formatTime()
            });
            
            // Keep only last 5 history items
            if (players[index].history.length > 5) {
                players[index].history = players[index].history.slice(0, 5);
            }
            
            // Update display
            document.getElementById(`score-${index}`).textContent = players[index].score;
            
            // Re-render to update history
            renderPlayers();
        }
        
        // Add new player
        function addPlayer() {
            players.push({ name: `اللاعب ${players.length + 1}`, score: 0, value: 1, history: [] });
            renderPlayers();
        }
        
        // Calculate results
        function calculateResults() {
            const resultsDiv = document.getElementById('results');
            const resultsContent = document.getElementById('results-content');
            const winnerDiv = document.getElementById('winner');
            
            // Sort players by score
            const sortedPlayers = [...players].sort((a, b) => b.score - a.score);
            
            // Display results
            resultsContent.innerHTML = '';
            sortedPlayers.forEach((player, index) => {
                const playerResult = document.createElement('div');
                playerResult.className = 'player-result';
                playerResult.innerHTML = `
                    <div style="display: flex; justify-content: space-between; padding: 10px; background: ${index % 2 === 0 ? '#f9f9f9' : 'white'}; border-radius: 5px;">
                        <div>${index + 1}. ${player.name}</div>
                        <div style="font-weight: bold;">${player.score} نقطة</div>
                    </div>
                `;
                resultsContent.appendChild(playerResult);
            });
            
            // Display winner
            if (sortedPlayers[0].score > 0) {
                winnerDiv.textContent = `الفائز: ${sortedPlayers[0].name} مع ${sortedPlayers[0].score} نقطة!`;
                
                // Highlight winner card
                const winnerIndex = players.findIndex(p => p.name === sortedPlayers[0].name);
                const winnerCard = document.getElementById(`score-${winnerIndex}`).closest('.player-card');
                winnerCard.classList.add('winner');
                
                // Add winner badge
                const winnerBadge = document.createElement('div');
                winnerBadge.className = 'winner-badge';
                winnerBadge.innerHTML = '<i class="fas fa-trophy"></i>';
                winnerCard.appendChild(winnerBadge);
            } else {
                winnerDiv.textContent = 'لا يوجد نقاط مسجلة بعد';
            }
            
            // Show results
            resultsDiv.style.display = 'block';
        }
        
        // Clear all scores
        function clearAll() {
            if (confirm('هل أنت متأكد من أنك تريد مسح جميع النقاط والسجلات؟')) {
                players.forEach(player => {
                    player.score = 0;
                    player.value = 1;
                    player.history = [];
                });
                renderPlayers();
                document.getElementById('results').style.display = 'none';
                
                // Remove winner highlighting
                document.querySelectorAll('.player-card').forEach(card => {
                    card.classList.remove('winner');
                    const badge = card.querySelector('.winner-badge');
                    if (badge) badge.remove();
                });
            }
        }
        
        // Initial render
        renderPlayers();
    </script>
</body>
</html>
```

الميزات الجديدة:

1. سجل النقاط في كل بطاقة: كل بطاقة لاعب تحتوي الآن على قسم "سجل النقاط" يعرض آخر 5 عمليات تمت.
2. تسجيل الوقت: كل عملية إضافة أو طرح تسجل معها الوقت الذي تمت فيه.
3. تمييز العمليات:
   · العمليات الإيجابية (إضافة نقاط) تظهر باللون الأخضر
   · العمليات السلبية (طرح نقاط) تظهر باللون الأحمر
4. واجهة مستخدم محسنة: التصميم أصبح أكثر تفاعلية مع الحفاظ على الجمالية.
5. رسالة عند عدم وجود عمليات: عندما لا يكون هناك سجل للنقاط، تظهر رسالة "لا توجد عمليات سابقة".

كيفية الاستخدام:

1. أدخل القيمة المرادة في حقل "القيمة" لكل لاعب
2. انقر على زر (+) لإضافة القيمة للاعب - سيظهر السجل في قسم "سجل النقاط"
3. انقر على زر (-) لطرح القيمة من اللاعب - سيظهر السجل في قسم "سجل النقاط"
4. انقر على "إضافة لاعب" لإضافة لاعب جديد
5. انقر على "حساب النتائج" لرؤية الترتيب والفائز
6. انقر على "مسح الكل" لإعادة تعيين جميع النقاط والسجلات

للاستخدام، ما عليك سوى نسخ الكود أعلاه وحفظه في ملف بامتداد .html ثم فتحه في أي متصفح ويب.
